
<!-- Comienzo de tabla -->
<div class="content-section implementation ui-fluid">
    <p-table #dt [columns]="cols" [value]="instructores" [scrollable]="true" scrollHeight="70vh" [resizableColumns]="true">
        <ng-template pTemplate="caption">
          <div style="text-align: right">
              <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
              <input type="text" pInputText size="50" [placeholder]="_LABEL.buscar" (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:auto">
              <button class="btn btn-success"
                      (click)="nuevoInstructor()">
                      <span>{{ _LABEL.nuevoInstructor }}</span>
              </button>
            </div>
          </ng-template>
          
          <ng-template pTemplate="colgroup" let-columns>
            <colgroup>
              <col *ngFor="let col of columns" [style.width]="col.width">
            </colgroup>
          </ng-template>
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th *ngFor="let col of columns" pResizableColumn>
                {{col.header}}
              </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
          <tr>
            <td *ngFor="let col of columns" class="ui-resizable-column" [ngSwitch]="col.field">
                <span *ngSwitchCase="'instructor'">
                    {{ rowData.nombre }}
                </span>
                <span *ngSwitchCase="'dni'">
                    {{ rowData.dni }}
                </span>
                <span *ngSwitchCase="'telefono'">
                    {{ rowData.telefono }}
                </span>
                <span *ngSwitchCase="'email'">
                    {{ rowData.email }}
                </span>
                <span *ngSwitchCase="'estudios'">
                    <button class="btn btn btn-info"
                    [title]="_HVR.estudio"
                    (click)="mostrarEstudios(rowData)">
                    <i class="fas fa-atlas"></i>
                  </button>
                </span>
                <span *ngSwitchCase="'horarios'">
                    <button class="btn btn btn-info"
                    [title]="_HVR.horario"
                    (click)="mostrarHorarios(rowData)">
                    <i class="fas fa-calendar-check"></i>
                  </button>
                </span>
                <span *ngSwitchCase="'areasPreferencia'">
                    <button class="btn btn btn-info"
                    [title]="_HVR.areasPref"
                    (click)="mostrarAreas(rowData)">
                    <i class="fas fa-font"></i>
                  </button>
                </span>
                <span *ngSwitchCase="'disponibilidad'">
                    <button class="btn btn btn-info" (click)="verCalendario(rowData)">
                        <i class="far fa-calendar-check"></i>
                      </button> 
                </span>
                <span *ngSwitchCase="'acciones'">
                    <button class="btn btn-success mr-2" (click)="editarInstructor(rowData);">
                        <i class="fas fa-user-edit"></i>
                      </button>
                      <button class="btn btn-danger" (click)="mostrarDialogoEliminar(rowData)">
                        <i class="fas fa-user-times"></i>
                      </button>
                </span>
            </td>
          </tr>
        </ng-template>
  
    </p-table>
  </div>
  
  <!-- Fin de tabla -->
<!-- Dialogo estudios-->
<div class="contenedor-info"  *ngIf="estudiosShowed">
    <div  class="dialogo bg-light p-1">
        <div class="dialogoHeader d-flex justify-content-between">
          <div></div>
          <div class="titulo text-center" ><h5> {{ _LABEL.estudios }}: </h5></div>
          <span class="btn btn-danger" (click)="cerrarEstudios()"><i class="fas fa-times"></i></span>
        </div>
        <div class="dialogoBody p-3 pt-3 text-center">
          <p> <span style="font-weight: bold"> </span>{{ instructorSeleccionado.estudios }} </p>

        </div>
      </div>
</div>
<!-- Dialogo horarios-->
<div class="contenedor-info"  *ngIf="horariosShowed">
    <div  class="dialogo bg-light p-1">
        <div class="dialogoHeader d-flex justify-content-between">
          <div></div>
          <div class="titulo text-center" ><h5>Horarios </h5></div>
          <span class="btn btn-danger" (click)="cerrarHorarios()"><i class="fas fa-times"></i></span>
        </div>
        <div class="dialogoBody p-3 pt-3 text-center">
          <p *ngFor="let horario of instructorSeleccionado.disponibilidadHoraria"> <span style="font-weight: bold"> {{ horario.dia }}  </span>
            {{ _Util.convertirTime(horario.horaInicio) }} a
            {{ _Util.convertirTime(horario.horaFin) }} 
          </p>

        </div>
      </div>
</div>
<!-- Dialogo Areas-->
<div class="contenedor-info"  *ngIf="areasShowed">
    <div  class="dialogo bg-light p-1">
        <div class="dialogoHeader d-flex justify-content-between">
          <div></div>
          <div class="titulo text-center" ><h5> Areas de preferencia </h5></div>
          <span class="btn btn-danger" (click)="cerrarAreas()"><i class="fas fa-times"></i></span>
        </div>
        <div class="dialogoBody p-3 pt-3 text-center">
          <h5 *ngFor="let area of instructorSeleccionado.areasPreferencia"> <span style="font-weight: bold"> </span>
            {{ area.nombre }}
          </h5>

        </div>
      </div>
</div>
<!--Dialogo eliminar-->
<dialogo-confirmacion *ngIf="mostrarDialogoBorrar"
                      (clickBotonCerrar)="ocultarDialogo()"
                      (clickBotonIzquierdo)="ocultarDialogo()"
                      (clickBotonDerecho)="eliminar()"
                      [titulo]="dlg.titulo"
                      [texto]="dlg.texto"
                      >

</dialogo-confirmacion>
<!--Calendario-->
<calendario-disponibilidad *ngIf="mostrarCalendario"
(clickBotonCerrar)="ocultarCalendario()"
[id]= instructorSeleccionado.id
[esSala]=false
[esInstructor]= true
></calendario-disponibilidad>
<ng4-loading-spinner></ng4-loading-spinner>

<!-- Formulario:  -->

<div class="contenedor-formulario" *ngIf="mostrarDialogoAB">
  <div class="card mt-2 w-50 mx-auto">
      <div class="card-head d-flex  w-100 justify-content-between">
        <div></div>
        <div class="pt-2">
          <h5 *ngIf="!edicion" class="">{{ _LABEL.nuevoInstructor}}</h5>
          <h5 *ngIf="edicion" class="">{{ _LABEL.edicionInstructor}}</h5>
        </div>
        <span class="btn btn-danger" (click)="ocultarDialogo()"><i class="fas fa-times"></i></span>
      </div>
      <div class="card-body">

        <div style="max-height: 70vh; overflow-y: scroll;overflow-x: hidden;">
            <div class="row">
                <div class="form-group col">
                  <label for="nombre">{{ _LABEL_REQUIRED.nombre }}</label>
                  <input
                            #nombre = "ngModel"
                            class="form-control"
                            type="text"
                            required
                            minlength="3"
                            maxlength="30"
                            [(ngModel)]="instructorSeleccionado.nombre"
                            [placeholder]="_LABEL.ingrese.nombre"
                            [pattern]="_PATTERN.nombre"
                            >
                  <div  *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" class="alert alert-danger">
                    <div *ngIf="nombre.errors.required">{{ _VALIDACION.requerido.nombre }}</div>
                    <div *ngIf="nombre.errors.pattern">{{ _VALIDACION.valido.nombre }}</div>
                    <div *ngIf="nombre.errors.minlength">{{ _VALIDACION.minimoTres }}</div>
                  </div>
                </div>
                <div class="form-group col">
                  <label for="apellido">{{ _LABEL_REQUIRED.apellido }}</label>
      
                  <input #apellido = "ngModel"
                                class="form-control"
                                type="text"
                                required
                                minlength="3"
                                maxlength="30"
                                [(ngModel)]="instructorSeleccionado.apellido"
                                [placeholder]="_LABEL.ingrese.apellido"
                                [pattern]="_PATTERN.nombre"
                                >
                        <div  *ngIf="apellido.invalid && (apellido.dirty || apellido.touched)" class="alert alert-danger">
                          <div *ngIf="apellido.errors.required">{{ _VALIDACION.requerido.apellido }}</div>
                          <div *ngIf="apellido.errors.pattern">{{ _VALIDACION.valido.apellido }}</div>
                          <div *ngIf="apellido.errors.minlength">{{ _VALIDACION.minimoTres }}</div>
                        </div>
                      </div>
              </div>
              <div class="row">
                <div class="form-group col">
                  <label for="dni">{{ _LABEL_REQUIRED.dni }}</label>
                    <input
                                #dni = "ngModel"
                                class="form-control"
                                type="text"
                                required
                                minlength="6"
                                maxlength="9"
                                [(ngModel)]="instructorSeleccionado.dni"
                                [placeholder]="_LABEL.ingrese.dni"
                                [pattern]="_PATTERN.dni"
                                >
                        <div  *ngIf="dni.invalid && (dni.dirty || dni.touched)" class="alert alert-danger">
                          <div *ngIf="dni.errors.required">{{ _VALIDACION.requerido.dni }}</div>
                          <div *ngIf="dni.errors.pattern">{{ _VALIDACION.valido.dni}}</div>
                          <div *ngIf="dni.errors.minlength">{{ _VALIDACION.minimoSeis }}</div>
                        </div>
                      </div>
                      <div class="form-group col">
                        <label for="telefono">{{ _LABEL_REQUIRED.telefono }}</label>
                        <input
                                        #telefono="ngModel"
                                        class="form-control"
                                        type="text"
                                        required
                                        [(ngModel)]="instructorSeleccionado.telefono"
                                        [placeholder]="_LABEL.ingrese.telefono"
                                        [pattern]="_PATTERN.telefono"
                                        >
                                <div  *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)" class="alert alert-danger">
                                    <div *ngIf="telefono.errors.required">{{ _VALIDACION.requerido.telefono }}</div>
                                    <div *ngIf="telefono.errors.pattern">{{ _VALIDACION.valido.telefono }}</div>
                                </div>
                      </div>
              </div>
              <div class="row">
                <div class="form-group col">
                  <label for="email">{{ _LABEL_REQUIRED.email }}</label>
                  <input
                                  #email="ngModel"
                                  class="form-control"
                                  type="email"
                                  required
                                  [(ngModel)]="instructorSeleccionado.email"
                                  [placeholder]="_LABEL.ingrese.email"
                                  [pattern]="_PATTERN.email"
                                  >
                          <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
                              <div *ngIf="email.errors.required">{{ _VALIDACION.requerido.email }}</div>
                              <div *ngIf="email.errors.pattern">{{ _VALIDACION.valido.email }}</div>
                          </div>
                </div>
                
                    <div class="form-group col">
                    <h6>{{ _LABEL.areaPreferencia }}</h6>
                    <p-multiSelect [options]="areas" [(ngModel)]="selectedAreas" optionLabel="nombre" [panelStyle]="{minWidth:'12em'}"></p-multiSelect>
                   
                   </div>
               </div> 
              <div class="row">
                <div class="form-group col">
                  <label for="">{{ _LABEL.estudios }}</label>
                  <textarea
                                name=""
                                id=""
                                rows="2"
                                class="form-control"
                                maxlength="200"
                                required
                                [(ngModel)]="instructorSeleccionado.estudios"
                                [placeholder]="_LABEL.ingreseEstudios"
                      ></textarea>
                </div>
              </div>
              <div class="row"><div class="form-group col">
                <label for="">{{ _LABEL.horarioCursada }} &nbsp; </label>
                
                <label for=""><button class="btn btn-success " type="button" (click)="addFieldValue()"> <i class="fas fa-plus"></i></button>
                </label>
                
                
               
                      <table  style="border:hidden;">
                          <thead>
                              <tr>
                                  <th>Dia</th>
                                  <th>Hora Inicio</th>
                                  <th>Hora Fin</th>
                                  <th> </th>
                              </tr>
                          </thead>
                          <tbody>
                              <tr *ngFor="let field of fieldArray; let i = index">
                                  <td>
                                      <select class="custom-select" [(ngModel)]="field.dia"  type="text" name="{{field.dia}}">
                                          <option *ngFor="let dia of dias" [value]="dia.dia">
                                            {{ dia.dia }}
                                          </option>
                                        </select>  
                                  </td>
                                  <td>
                                      <p-calendar [(ngModel)]="field.horaInicio"   name="{{field.horaInicio}}" [timeOnly]="true" hourFormat="24"></p-calendar>
                            
                                  </td>
                                  <td>
                                      <p-calendar [(ngModel)]="field.horaFin"  name="{{field.horaFin}}" [timeOnly]="true" hourFormat="24"></p-calendar>
                                  </td>
                                  <td>

                                      <button class="btn btn-danger"  type="button" (click)="deleteFieldValue(i)"><i class="fas fa-minus"></i></button>
                                  </td>
                              </tr>
                              <tr>
                                  <td>
                                      <select class="custom-select" id="newAttributeDia" [(ngModel)]="newAttribute.dia"  type="text" name="newAttributeDia">
                                          <option *ngFor="let dia of dias" [value]="dia.dia">
                                            {{ dia.dia }}
                                          </option>
                                        </select>  
                                  </td>
                                  <td>
                                      <p-calendar [(ngModel)]="newAttribute.horaInicio" id="newAttributehoraInicio"   name="newAttributehoraInicio" [timeOnly]="true" hourFormat="24"></p-calendar>
                                   
                                  </td>
                                  <td>
                                      <p-calendar [(ngModel)]="newAttribute.horaFin" id="newAttributehoraFin"  name="newAttributehoraFin" [timeOnly]="true" hourFormat="24"></p-calendar>
                                     
                                  </td>
                                 
                                  <td>
                                      <button class="btn btn-danger"  type="button" (click)="deleteAtributteValue()"><i class="fas fa-minus"></i></button>
                                  </td>
                              </tr>
                             
                          </tbody>
                      </table>  
              </div>
              </div>
                <!-- <div class="form-group col">
                  <label for="">{{ _LABEL.dispHoraria }}</label>
      
                        <table  style="border:hidden;">
                            <thead>
                                <tr>
                                    <th>Dia</th>
                                    <th>Hora Inicio</th>
                                    <th>Hora Fin</th>
                                    <th>Accion</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let field of fieldArray; let i = index">
                                    <td>
                                        <select class="form-control" [(ngModel)]="field.dia"  type="text" name="{{field.dia}}">
                                            <option *ngFor="let dia of dias" [value]="dia.dia">
                                              {{ dia.dia }}
                                            </option>
                                          </select>  
                                    </td>
                                    <td>
                                        <p-calendar [(ngModel)]="field.horaInicio"   name="{{field.horaInicio}}" [timeOnly]="true" hourFormat="24"></p-calendar>
                              
                                    </td>
                                    <td>
                                        <p-calendar [(ngModel)]="field.horaFin"  name="{{field.horaFin}}" [timeOnly]="true" hourFormat="24"></p-calendar>
                                    </td>
                                    <td>
                                        <button class="btn btn-default"  type="button" (click)="deleteFieldValue(i)">Eliminar</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <select class="form-control" id="newAttributeDia" [(ngModel)]="newAttribute.dia"  type="text" name="newAttributeDia">
                                            <option *ngFor="let dia of dias" [value]="dia.dia">
                                              {{ dia.dia }}
                                            </option>
                                          </select>  
                                    </td>
                                    <td>
                                        <p-calendar [(ngModel)]="newAttribute.horaInicio" id="newAttributehoraInicio"   name="newAttributehoraInicio" [timeOnly]="true" hourFormat="24"></p-calendar>
                                     
                                    </td>
                                    <td>
                                        <p-calendar [(ngModel)]="newAttribute.horaFin" id="newAttributehoraFin"  name="newAttributehoraFin" [timeOnly]="true" hourFormat="24"></p-calendar>
                                       
                                    </td>
                                    <td>
                                        <button class="btn btn-default" type="button" (click)="addFieldValue()">Agregar</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>  
                </div>
              </div>
 -->

          </div>
        </div>

        <div class="pr-4 pb-4">
          <button
                  class="btn btn-primary float-right "
                  [disabled]="blankSpaces() || nombre.invalid || apellido.invalid || dni.invalid || email.invalid || telefono.invalid "
                  (click)="guardar()"
          >
            <span *ngIf="edicion">{{ _LABEL.guardar }}</span>
            <span *ngIf="!edicion">{{ _LABEL.agregar }}</span>
          </button>
        </div>
    </div>
</div>



